!function(a,b){"use strict";var c=function(c,d){var e=this,f=a(c),g=f.children(".mSwipe-sled"),h=g.children("li"),i=f.find(".mSwipe-next"),j=f.find(".mSwipe-prev"),k=a.extend({onFinishedSetup:function(){},duration:250,pagingTouchLength:100,supportsCsstransitions:!!(b||{}).csstransitions,supportsCsstransforms:!!(b||{}).csstransforms},d);g.attr("aria-live","polite").toggleClass("no-transition-support",!k.supportsCsstransforms).css("transition-duration",k.duration+"ms"),e.util={throttle:function(a,b,c,d){var f,g,h;c||(c=50),d||(d=c);var i=function(){"function"==typeof b&&(clearTimeout(g),h=setTimeout(function(){b.apply(e)},d))};return function(){var b=+new Date,d=arguments;f&&f+c>b?(clearTimeout(g),clearTimeout(h),g=setTimeout(function(){f=b,a.apply(e,d),i()},c)):(f=b,a.apply(e,d),i())}},easing:function(a){return a*(2-a)}};var l=0,m=h.length-1,n=function(){g.addClass("disable-transition");var b=Math.max.apply(null,h.map(function(){return a(this).height()}).get()),c=f.width();f.height(b),h.css({width:c,height:b}),g.css({width:c*(m+1)+"px",height:b,left:-c*l}),g.removeClass("disable-transition")},o=function(a){return k.supportsCsstransforms?{transform:"translate("+a+"px, 0px)"}:{left:a+"px"}},p=function(a,b){k.supportsCsstransitions||b?g.css(o(a)):g.animate(o(a),{duration:k.duration,queue:!1})},q=function(){f.toggleClass("firstSlide",0==l),j.prop("disabled",0==l),f.toggleClass("lastSlide",l==m),i.prop("disabled",l==m),g.children("li[aria-hidden!=true]").attr("aria-hidden","true"),g.children("li").eq(l).attr({"aria-hidden":!1})};e.prev=function(){return console.log("prev"),l>0&&(l--,p(-f.width()*l),q()),c},e.next=function(){return console.log("next"),m>l&&(l++,p(-f.width()*l),q()),c},e.reset=function(){return console.log("reset"),p(-f.width()*l),c},e.slideCountChanged=function(){return h=g.children("li"),m=h.length-1,n(),c};var r,s,t=function(a){a.preventDefault(),f.touchstartx=a.originalEvent.touches[0].pageX,f.touchstartY=a.originalEvent.touches[0].pageY,f.touchstartWidth=f.width(),f.touchstartTotalWidth=f.touchstartWidth*m,f.touchMoveActive=!0,f.touchLeft=0,g.addClass("disable-transition"),console.log("onTouchStart")},u=function(a){a.preventDefault(),a.stopPropagation(),s=a.originalEvent.touches[0].pageY-f.touchstartY,Math.abs(s)>1&&scrollTo(scrollX,scrollY-s),f.touchMoveActive?(f.touchLeft=-f.touchstartWidth*l-(f.touchstartx-a.originalEvent.touches[0].pageX),f.touchLeft>0?(r=f.touchLeft/f.touchstartWidth,p(e.util.easing(r>1?1:r)*(f.touchstartWidth/8),!0)):m==l&&f.touchstartTotalWidth<Math.abs(f.touchLeft)?(r=(f.touchLeft+f.touchstartTotalWidth)/-f.touchstartWidth,p(-(e.util.easing(r>1?1:r)*f.touchstartWidth/8)-f.touchstartTotalWidth,!0)):p(f.touchLeft,!0)):(console.log("UNSTARTED onTouchMove"),t(a))},v=function(a){if(f.touchMoveActive){a.preventDefault(),a.stopPropagation(),f.touchMoveActive=!1,g.removeClass("disable-transition"),console.log("onTouchEnd");var b=g.position().left,c=-f.touchstartWidth*l;c>b&&b<c+k.pagingTouchLength&&m>l?e.next():b>c&&b>c-k.pagingTouchLength&&l>0?e.prev():e.reset()}},w=e.util.throttle(function(){n()},function(){},16),x=function(){f.on("click touch",".mSwipe-next",e.next),f.on("click.mSwipe",".mSwipe-prev",e.prev),f.on("touchstart.mSwipe",".mSwipe-sled > li",t),f.on("touchmove.mSwipe",".mSwipe-sled > li",u),f.on("touchend.mSwipe touchcancel.mSwipe touchleave.mSwipe",".mSwipe-sled > li",v),a(window).on("resize.mSwipe",w)};n(),q(),x(),k.onFinishedSetup.apply(e,[e])};a.fn.mSwipeSlider=function(b){return this.map(function(d,e){var f=a(e),g=f.data("mSwipeSlider");if(g){if(g[b])return g[b].apply(this,Array.prototype.slice.call(arguments,1))}else f.data("mSwipeSlider",new c(this,b));return e})}}(jQuery,window.Modernizr);